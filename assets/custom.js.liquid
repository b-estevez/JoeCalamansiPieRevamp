// Nav scroll
const headerTag = document.querySelector('header');

// Get the offset position of the navbar
var sticky = headerTag.offsetTop;
window.onscroll = function() {
    changeNav();
}

function changeNav(){
    if (window.pageYOffset > sticky) {
        headerTag.classList.add("bg-white","text-green-950");
        document.querySelectorAll('header .text-white')?.forEach((e) => e.classList.replace('text-white','text-green-950'));
        // document.querySelectorAll('header .bg-white')?.forEach((e) => e.classList.replace('bg-white','bg-black'));
        document.querySelectorAll('header .bg-white\\/10')?.forEach((e) => e.classList.replace('bg-white/10','bg-black/10'));
        document.querySelector('#jcc_logo')?.classList.remove('invisible');
    } else {
        headerTag.classList.remove("bg-white","text-green-950");
        // document.querySelectorAll('header .bg-black')?.forEach((e) => e.classList.replace('bg-black','bg-white'));
        document.querySelectorAll('header .text-green-950')?.forEach((e) => e.classList.replace('text-green-950','text-white'));
        document.querySelectorAll('header .bg-black\\/10')?.forEach((e) => e.classList.replace('bg-black/10','bg-white/10'));
        document.querySelector('#jcc_logo')?.classList.add('invisible');
      
    }
}

// End of Nav scroll


// product page functions

const first_image = document.querySelector('.product-first-image');
const second_image = document.querySelector('.product-second-image');
const third_image = document.querySelector('.product-third-image');

function transition(e){
    const clickedImage = e.target;

    // If left image was clicked
    if(clickedImage.classList.contains("product-second-image")){
        // Animate first image
        first_image.classList.add("animate-productFirstImageLeftTransition");
        // Animate clicked image
        clickedImage.classList.add("animate-productSecondImageTransition");

        // Swap images & remove animation class after animation ends
        first_image.addEventListener("animationend", ()=> {
            first_image.classList.remove("animate-productFirstImageLeftTransition");
            clickedImage.classList.remove("animate-productSecondImageTransition");
            swapImage(e);            
        }, { once: true });
    }

        // If right image was clicked
    if(clickedImage.classList.contains("product-third-image")){
        // Animate first image
        first_image.classList.add("animate-productFirstImageRightTransition");
        // Animate clicked image
        clickedImage.classList.add("animate-productThirdImageTransition");
        
        // Swap images & remove animation class after animation ends
        first_image.addEventListener("animationend", ()=> {
            first_image.classList.remove("animate-productFirstImageRightTransition");
            clickedImage.classList.remove("animate-productThirdImageTransition");
            swapImage(e);            
        }, { once: true });
    }

}

function swapImage(e){
    first_image.style.backgroundImage;
    const clickedImage = e.target.style.backgroundImage;
    e.target.style.backgroundImage = first_image.style.backgroundImage;
    first_image.style.backgroundImage = clickedImage;
}

second_image.addEventListener('click', transition);
third_image.addEventListener('click', transition);
// third_image.onclick = transition;

// end of product page functions